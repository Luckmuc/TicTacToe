<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Game Hub</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Username Screen -->
    <div id="usernameScreen" class="screen active">
        <div class="container">
            <h1 class="title">Game Hub</h1>
            <div class="card">
                <h2>Benutzername eingeben</h2>
                <input type="text" id="usernameInput" placeholder="Dein Name" maxlength="20">
                <button id="submitUsername" class="btn btn-primary">Weiter</button>
            </div>
        </div>
    </div>

    <!-- Menu Screen -->
    <div id="menuScreen" class="screen">
        <div class="container">
            <h1 class="title">Game Hub</h1>
            <div class="welcome">Willkommen, <span id="usernameDisplay"></span>!</div>
            <div class="menu-buttons">
                <button id="playParkourBtn" class="btn btn-accent btn-large">
                    Duo Parkour
                </button>
                <button id="playTicTacToeBtn" class="btn btn-primary btn-large">
                    TicTacToe
                </button>
                <button id="playChessBtn" class="btn btn-chess btn-large">
                    Schach
                </button>
                <button id="openChatBtn" class="btn btn-chat btn-large">
                    Chat
                </button>
            </div>
        </div>
    </div>

    <!-- TicTacToe Menu Screen -->
    <div id="ticTacToeMenuScreen" class="screen">
        <div class="container">
            <h1 class="title">TicTacToe</h1>
            <div class="card">
                <div class="menu-buttons">
                    <button id="playBotBtn" class="btn btn-primary btn-large">
                        Gegen Bot spielen
                    </button>
                    <button id="playMultiplayerBtn" class="btn btn-secondary btn-large">
                        TicTacToe Mehrspieler
                    </button>
                    <button id="backFromTicTacToeMenuBtn" class="btn btn-secondary">
                        Zurück
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chess Menu Screen -->
    <div id="chessMenuScreen" class="screen">
        <div class="container">
            <h1 class="title">Schach</h1>
            <div class="card">
                <div class="menu-buttons">
                    <button id="playChessBotBtn" class="btn btn-primary btn-large">
                        Gegen Bot spielen
                    </button>
                    <button id="playChessMultiplayerBtn" class="btn btn-secondary btn-large">
                        Online Multiplayer
                    </button>
                    <button id="backFromChessMenuBtn" class="btn btn-secondary">
                        Zurück
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Multiplayer Options Screen -->
    <div id="optionsScreen" class="screen">
        <div class="container">
            <h1 class="title">Mehrspieler</h1>
            <div class="card">
                <h2>Gegner suchen</h2>
                <p class="info-text">Finde einen Gegner und konfiguriert gemeinsam das Spiel!</p>
                
                <div class="button-group">
                    <button id="startSearchBtn" class="btn btn-primary">Gegner suchen</button>
                    <button id="backToMenuBtn" class="btn btn-secondary">Zurück</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Lobby Screen (beide Spieler zusammen) -->
    <div id="lobbyScreen" class="screen">
        <div class="container">
            <h1 class="title">Spiellobby</h1>
            <div class="card">
                <h2>Spieleinstellungen</h2>
                <p class="lobby-opponent">Gegner: <span id="lobbyOpponentName"></span></p>
                
                <div class="option-group">
                    <label for="lobbyMatchCount">Anzahl der Spiele:</label>
                    <input type="range" id="lobbyMatchCount" min="1" max="50" value="1">
                    <span id="lobbyMatchCountValue">1</span>
                </div>

                <div class="option-group">
                    <label>Spielmodus:</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="lobbyGameMode" value="normal" checked>
                            <span>Normal (ohne Punkte)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="lobbyGameMode" value="competitive">
                            <span>Competitive (mit Punkten)</span>
                        </label>
                    </div>
                </div>

                <div id="settingsUpdateNotice" class="settings-notice hidden">
                    Einstellungen wurden von <span id="settingsUpdater"></span> geändert
                </div>

                <div class="ready-status">
                    <div class="ready-player">
                        <span id="player1NameReady"></span>: 
                        <span id="player1ReadyStatus" class="status-badge">Nicht bereit</span>
                    </div>
                    <div class="ready-player">
                        <span id="player2NameReady"></span>: 
                        <span id="player2ReadyStatus" class="status-badge">Nicht bereit</span>
                    </div>
                </div>

                <div class="button-group">
                    <button id="readyBtn" class="btn btn-primary">Bereit</button>
                    <button id="leaveLobbyBtn" class="btn btn-secondary">Lobby verlassen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Searching Screen -->
    <div id="searchingScreen" class="screen">
        <div class="container">
            <h1 class="title">Suche Gegner...</h1>
            <div class="card">
                <div class="spinner"></div>
                <p class="searching-text">Warte auf einen weiteren Spieler...</p>
                <button id="cancelSearchBtn" class="btn btn-secondary">Suche abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="game-container">
            <div class="game-header">
                <div class="player-info">
                    <div class="player-name" id="playerName"></div>
                    <div class="player-symbol" id="playerSymbol"></div>
                </div>
                <div class="game-status">
                    <div id="turnIndicator" class="turn-indicator">Dein Zug</div>
                    <div id="matchInfo" class="match-info"></div>
                </div>
                <div class="opponent-info">
                    <div class="player-name" id="opponentName"></div>
                    <div class="player-symbol" id="opponentSymbol"></div>
                </div>
            </div>

            <div id="scoreBoard" class="score-board hidden">
                <div class="score-item">
                    <span class="score-label">Du:</span>
                    <span id="yourScore" class="score-value">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">Unentschieden:</span>
                    <span id="drawScore" class="score-value">0</span>
                </div>
                <div class="score-item">
                    <span class="score-label">Gegner:</span>
                    <span id="opponentScore" class="score-value">0</span>
                </div>
            </div>

            <div class="board-container">
                <div id="board" class="board">
                    <div class="cell" data-index="0"></div>
                    <div class="cell" data-index="1"></div>
                    <div class="cell" data-index="2"></div>
                    <div class="cell" data-index="3"></div>
                    <div class="cell" data-index="4"></div>
                    <div class="cell" data-index="5"></div>
                    <div class="cell" data-index="6"></div>
                    <div class="cell" data-index="7"></div>
                    <div class="cell" data-index="8"></div>
                </div>
            </div>

            <button id="leaveGameBtn" class="btn btn-secondary">Spiel verlassen</button>
        </div>
    </div>

    <!-- Game End Overlay -->
    <div id="gameEndOverlay" class="game-end-overlay">
        <div class="game-end-content">
            <h1 id="gameEndTitle" class="game-end-title"></h1>
            <p id="gameEndSubtitle" class="game-end-subtitle"></p>
            <div id="seriesScores" class="series-scores hidden"></div>
            <div class="button-group-overlay">
                <button id="continueBtn" class="btn btn-primary btn-large" style="display:none;">Weiter</button>
                <button id="backToMenuFromOverlay" class="btn btn-secondary">Zurück zum Menü</button>
            </div>
        </div>
    </div>

    <!-- Final Modal -->
    <div id="gameEndModal" class="modal">
        <div class="modal-content">
            <h2 id="finalTitle"></h2>
            <p id="finalMessage"></p>
            <div id="finalScores" class="series-scores hidden"></div>
            <button id="backToMenuFromGame" class="btn btn-primary">Zurück zum Menü</button>
        </div>
    </div>

    <!-- Parkour Searching Screen -->
    <div id="parkourSearchingScreen" class="screen">
        <div class="container">
            <h1 class="title">Suche Teammate...</h1>
            <div class="card">
                <div class="spinner"></div>
                <p class="searching-text">Warte auf einen zweiten Spieler...</p>
                <button id="cancelParkourSearchBtn" class="btn btn-secondary">Suche abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Parkour Game Screen -->
    <div id="parkourScreen" class="screen">
        <div class="parkour-container">
            <div class="parkour-header">
                <div class="parkour-info">
                    <span id="parkourPlayer1">Spieler 1</span>
                    <span class="parkour-separator">+</span>
                    <span id="parkourPlayer2">Spieler 2</span>
                </div>
                <div class="parkour-stats">
                    <span>Zeit: <span id="parkourTime">0:00</span></span>
                    <span>Level: <span id="parkourLevel">1</span></span>
                </div>
            </div>
            <canvas id="parkourCanvas"></canvas>
            <div class="parkour-touch-controls">
                <button id="touchLeftBtn" class="touch-btn">◀</button>
                <button id="touchJumpBtn" class="touch-btn touch-jump">▲</button>
                <button id="touchDownBtn" class="touch-btn touch-down">▼</button>
                <button id="touchRopeBtn" class="touch-btn touch-rope">Seil</button>
                <button id="touchRightBtn" class="touch-btn">▶</button>
            </div>
            <div class="parkour-controls">
                <div class="control-info">
                    <p>Steuerung: WASD = Bewegen & Springen | Pfeiltasten = Bewegen & Springen</p>
                    <p>R = Seil werfen | E = Seil greifen | W/S = Hoch/Runter</p>
                </div>
                <button id="leaveParkourBtn" class="btn btn-secondary">Spiel verlassen</button>
            </div>
        </div>
    </div>

    <!-- Chess Searching Screen -->
    <div id="chessSearchingScreen" class="screen">
        <div class="container">
            <h1 class="title">Suche Gegner...</h1>
            <div class="card">
                <div class="spinner"></div>
                <p class="searching-text">Warte auf einen Schach-Gegner...</p>
                <button id="cancelChessSearchBtn" class="btn btn-secondary">Suche abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Chess Game Screen -->
    <div id="chessScreen" class="screen">
        <div class="chess-container">
            <div class="chess-header">
                <div class="chess-player-info">
                    <span id="chessPlayer1" class="chess-player-name">Spieler 1</span>
                </div>
                <div class="chess-status-container">
                    <div id="chessTurn" class="chess-turn">Weiß am Zug</div>
                    <div id="chessStatus" class="chess-game-status"></div>
                </div>
                <div class="chess-player-info">
                    <span id="chessPlayer2" class="chess-player-name">Spieler 2</span>
                </div>
            </div>
            <div id="chessBoard" class="chess-board"></div>
            <div class="chess-controls">
                <button id="leaveChessBtn" class="btn btn-secondary">Spiel verlassen</button>
            </div>
        </div>
    </div>

    <!-- Chat Screen -->
    <div id="chatScreen" class="screen">
        <div class="chat-container">
            <div class="chat-header">
                <h2>Global Chat</h2>
                <button id="closeChatBtn" class="btn btn-secondary btn-small">Zurück</button>
            </div>
            <div id="chatMessages" class="chat-messages"></div>
            <div class="chat-input-container">
                <input type="text" id="chatInput" placeholder="Nachricht eingeben..." maxlength="500">
                <button id="sendChatBtn" class="btn btn-primary">Senden</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
    <script src="parkour.js"></script>
    <script src="chess.js"></script>
    <script src="chat.js"></script>
</body>
</html>
